<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- iOS Safari -->
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<!-- Chrome, Firefox OS and Opera Status Bar Color -->
<meta name="theme-color" content="#FFFFFF">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
<link rel="stylesheet" type="text/css"
  href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.19.0/themes/prism.min.css">
<link rel="stylesheet" type="text/css" href="css/SourceSansPro.css">
<link rel="stylesheet" type="text/css" href="css/theme.css">
<link rel="stylesheet" type="text/css" href="css/notablog.css">
<!-- Favicon -->

  <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🗿&lt;/text&gt;&lt;/svg&gt;">

<style>
  :root {
    font-size: 20px;
  }
</style>
  <title>用 GraphQL 查询你的 Django 应用&nbsp;|&nbsp;布鲁斯🐟的奇思乱想</title>
  <meta property="og:type" content="blog">
  <meta property="og:title" content="用 GraphQL 查询你的 Django 应用">
  
  
    <meta property="og:image" content="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😶‍🌫️&lt;/text&gt;&lt;/svg&gt;">
  
  <style>
    .DateTagBar {
      margin-top: 1.0rem;
    }
  </style>
</head>

<body>
  <nav class="Navbar">
  <a href="index.html">
    <div class="Navbar__Btn">
      
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🗿&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
      
      <span>Home</span>
    </div>
  </a>
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="0316b907039e49eb86c087e28a94f00b.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;🧱&lt;/text&gt;&lt;/svg&gt;"></span>&nbsp;
          
          <span>Projects</span>
        </div>
      </a>
    
  
    
      <span class="Navbar__Delim">&centerdot;</span>
      <a href="about.html">
        <div class="Navbar__Btn">
          
            <span><img class="inline-img-icon" src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F3a9bcf6a-f4f8-4580-93a6-b21a38a8914b%2F988431636594419_.pic.jpg?table=block&amp;id=78f0b500-97be-4b05-ad6d-630418880655"></span>&nbsp;
          
          <span>关于我</span>
        </div>
      </a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
</nav>
  <header class="Header">
    
      <div class="Header__Cover">
        <img src="https://images.unsplash.com/photo-1610007863631-86d870c56b45?ixlib=rb-1.2.1&amp;q=85&amp;fm=jpg&amp;crop=entropy&amp;cs=srgb">
      </div>
    
    <div class="Header__Spacer ">
    </div>
    
      <div class="Header__Icon">
        <span><img class="inline-img-icon" src="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text text-anchor=%22middle%22 dominant-baseline=%22middle%22 x=%2250%22 y=%2255%22 font-size=%2280%22&gt;😶‍🌫️&lt;/text&gt;&lt;/svg&gt;"></span>
      </div>
    
    <h1 class="Header__Title">用 GraphQL 查询你的 Django 应用</h1>
    
      <div class="DateTagBar">
        
          <span class="DateTagBar__Item DateTagBar__Date">Posted on Sat, Nov 27, 2021</span>
        
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--default">
            <a href="tag/tech.html">tech</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--green">
            <a href="tag/graphql.html">graphql</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--gray">
            <a href="tag/django.html">django</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--default">
            <a href="tag/python.html">python</a>
          </span>
        
          <span class="DateTagBar__Item DateTagBar__Tag DateTagBar__Tag--pink">
            <a href="tag/web.html">web</a>
          </span>
        
      </div>
    
  </header>
  <article id="https://www.notion.so/2b0c68692cd5466492698730ebbc1fa6" class="PageRoot PageRoot--FullWidth"><ul id="https://www.notion.so/ca7374ceb7644a8182f40c59d8b9ca38" class="ColorfulBlock ColorfulBlock--ColorGray TableOfContents"><li class="TableOfContents__Item"><a href="#https://www.notion.so/83e9746bbbb34d2e93f8879eea3ec932"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">什么是 GraphQL ？</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/a150ad0edcfc4ab8b11382ec778e35f4"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">它有什么有意思的特性</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/c278553fcd56404ca45dc147c9aace29"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">Fragments</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/b6800eba4088404ba36d314484d6b42c"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">Directives</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f3a9dfb54764440c9d36d5a7deceb5dd"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">和 REST 相比较有什么优势和劣势？</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/dec99714a6dc43e3803a82ff4f702891"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">TLDR</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/437b86be9cab47b890a8cd9158ca7ecb"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">vs 扩展的 REST 协议</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/1e65a49c19ac4da1ae8366ba9c461af2"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">什么是 GraphQL 客户端?</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/f0ff16d684154ed4a4067456907856da"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">服务端落地：GraphQL → Django</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/379decb772d541279b4a379192597aa5"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">支持 Relay</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/62d2c6f19a52464794172a0da302a140"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">引入 </span><span class="SemanticString">graphene-django-extras</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/cd5ccf48f0af4fbba1811566c44a7915"><div style="margin-left:24px"><span class="SemanticStringArray"><span class="SemanticString">鉴权</span></span></div></a></li><li class="TableOfContents__Item"><a href="#https://www.notion.so/0151349335634c8aa268f2794e844c4f"><div style="margin-left:0px"><span class="SemanticStringArray"><span class="SemanticString">总结</span></span></div></a></li></ul><div id="https://www.notion.so/363e3e5d6bd74748b779bf913a35b444" class="ColorfulBlock ColorfulBlock--BgGray Callout"><div class="Callout__Icon"><div class="Icon">😶‍🌫️</div></div><p class="Callout__Content"><span class="SemanticStringArray"><span class="SemanticString">全文以后端开发视角写作，部分涉及到前端开发的介绍可能存在错误或者不准确，欢迎在评论区斧正</span></span></p></div><h2 id="https://www.notion.so/83e9746bbbb34d2e93f8879eea3ec932" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/83e9746bbbb34d2e93f8879eea3ec932"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">什么是 GraphQL ？</span></span></h2><div id="https://www.notion.so/69a3638a71f24017b2319c0e782357e4" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">先来看看 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://zh.wikipedia.org/wiki/GraphQL">wikipedia</a></span><span class="SemanticString">：</span></span></p></div><blockquote id="https://www.notion.so/19c9f68630f24d739b0ee1aee421e28f" class="ColorfulBlock ColorfulBlock--ColorDefault Quote"><span class="SemanticStringArray"><span class="SemanticString">GraphQL 是一个开源的，面向 API 而创造出来的数据查询操作语言以及相应的服务端运行环境。</span></span></blockquote><div id="https://www.notion.so/f888c34c6bdd49b7bb79a0e220805f02" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">GraphQL 首先是一种查询语言，它定义了一种通用的数据查询方式，可以理解为一种通用的 SQL，只不过前者面向抽象的数据集，后者往往是具体的关系型数据库。</span></span></p></div><div id="https://www.notion.so/e0cf4656138e47d694dd1f0ad3ff1316" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">其次，它还包括一种服务端运行时，用于实现查询语句解析、数据类型定义。</span></span></p></div><h2 id="https://www.notion.so/a150ad0edcfc4ab8b11382ec778e35f4" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/a150ad0edcfc4ab8b11382ec778e35f4"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">它有什么有意思的特性</span></span></h2><div id="https://www.notion.so/9a637af775ff4644a4df52d4c66586de" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">仅从后端开发视角，列举几个觉得有意思的特性</span></span></p></div><h3 id="https://www.notion.so/c278553fcd56404ca45dc147c9aace29" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/c278553fcd56404ca45dc147c9aace29"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Fragments</span></span></h3><pre id="https://www.notion.so/d309103772814741be29d1323776f302" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">query</span> <span class="token definition-query function">HeroComparison</span><span class="token punctuation">(</span><span class="token variable">$first</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">leftComparison</span><span class="token punctuation">:</span> <span class="token property-query">hero</span><span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">EMPIRE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">comparisonFields</span>
  <span class="token punctuation">}</span>
  <span class="token attr-name">rightComparison</span><span class="token punctuation">:</span> <span class="token property-query">hero</span><span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token constant">JEDI</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token fragment function">comparisonFields</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fragment</span> <span class="token fragment function">comparisonFields</span> <span class="token keyword">on</span> <span class="token class-name">Character</span> <span class="token punctuation">{</span>
  <span class="token property">name</span>
  <span class="token property-query">friendsConnection</span><span class="token punctuation">(</span><span class="token attr-name">first</span><span class="token punctuation">:</span> <span class="token variable">$first</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">totalCount</span>
    <span class="token object">edges</span> <span class="token punctuation">{</span>
      <span class="token object">node</span> <span class="token punctuation">{</span>
        <span class="token property">name</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/c4411f0780e94675ba5273239f0be65f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">使用 Fragment 复用查询内容，并且可以定义参数</span></span></p></div><h3 id="https://www.notion.so/b6800eba4088404ba36d314484d6b42c" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/b6800eba4088404ba36d314484d6b42c"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">Directives</span></span></h3><pre id="https://www.notion.so/93e00565a944408fb528e09835e14cc5" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">query</span> <span class="token definition-query function">Hero</span><span class="token punctuation">(</span><span class="token variable">$episode</span><span class="token punctuation">:</span> <span class="token class-name">Episode</span><span class="token punctuation">,</span> <span class="token variable">$withFriends</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token property-query">hero</span><span class="token punctuation">(</span><span class="token attr-name">episode</span><span class="token punctuation">:</span> <span class="token variable">$episode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">name</span>
    <span class="token property">friends</span> <span class="token directive function">@include</span><span class="token punctuation">(</span><span class="token attr-name">if</span><span class="token punctuation">:</span> <span class="token variable">$withFriends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token property">name</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># variables</span>
<span class="token punctuation">{</span>
  <span class="token string">"episode"</span><span class="token punctuation">:</span> <span class="token string">"JEDI"</span><span class="token punctuation">,</span>
  <span class="token string">"withFriends"</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/fb17926618f1470c9b33088bb8d9745c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可以通过通用的两种指令来控制一些字段的返回：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/5155f7e928874da9a7a4d61cc384db09" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"> </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@include(if: Boolean)</code></span><span class="SemanticString"> </span></span></li><li id="https://www.notion.so/f1b668396ca9477daaeedf56f405bc18" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"> </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">@skip(if: Boolean)</code></span><span class="SemanticString"> </span></span></li></ul><h2 id="https://www.notion.so/f3a9dfb54764440c9d36d5a7deceb5dd" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f3a9dfb54764440c9d36d5a7deceb5dd"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">和 REST 相比较有什么优势和劣势？</span></span></h2><h3 id="https://www.notion.so/dec99714a6dc43e3803a82ff4f702891" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/dec99714a6dc43e3803a82ff4f702891"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">TLDR</span></span></h3><div id="https://www.notion.so/a4476b5291f04f92b75dd25f55deb998" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">REST 更多是从 HTTP 协议出发的一种约定协议，因为受制于 HTTP 协议本身的设计，在</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">表达能力</strong></span><span class="SemanticString">上是弱于</span><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">作为查询语言</strong></span><span class="SemanticString">的 GraphQL 的。</span></span></p></div><div id="https://www.notion.so/f83da32fd8454fb28ec0683e1e66483c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">同时，REST 通常都是由后端开发者主动封装，而 GraphQL 则是由前端主动拼装。</span></span></p></div><div id="https://www.notion.so/a9808ccff938407c94f2cb11844f0b9b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以如果面对的场景是</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorGreen">前端需求复杂而多变，GraphQL 肯定比 REST 更适合快速迭代。</mark></span></span></p></div><div id="https://www.notion.so/cbd0a0a2da8c4e68975fef214bc7625c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">也正因此，GraphQL 在实现上更加繁复，所以</span><span class="SemanticString"><mark class="SemanticString__Fragment SemanticString__Fragment--HighlightedColor SemanticString__Fragment--ColorPink">面对 API 数量少、需求不会轻易的场景时，REST 反而是更适合的技术选型。</mark></span></span></p></div><div id="https://www.notion.so/8d9e885510c147b49bd1cbb72fae2e44" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/a2fab348ed3449e6a353a1958a5e6ef9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">作为后端开发，学习和使用 GraphQL 的动力，更多是</em></span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">想将自己从 CRUD 的泥沼中拯救出来，</strong></em></span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">将更多的精力放在其他更重要的技术上。</em></span></span></p></div><h3 id="https://www.notion.so/437b86be9cab47b890a8cd9158ca7ecb" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/437b86be9cab47b890a8cd9158ca7ecb"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">vs 扩展的 REST 协议</span></span></h3><div id="https://www.notion.so/15244e218b024dbc9e4cb8e1a4256be7" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">和 REST 一样，GraphQL 并不是什么开发框架，它只是定义了一种通用型查询的 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://en.wikipedia.org/wiki/Domain-specific_language">DSL</a></span><span class="SemanticString">。</span></span></p></div><div id="https://www.notion.so/d03f8280002c47afbb4f7b5a40ac4321" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">而使用 REST 协议进行资源拉取，我们总是会面临一些实际的问题，而 GraphQL 可以在一定程度上解决。那么肯定会有同学在想，REST 是非常灵活的，完全可以通过自建一个查询语法，弥补上述的 REST 缺陷，何必要另外引入 GraphQL 徒增复杂度呢。</span></span></p></div><div id="https://www.notion.so/99736c8c98a1422082f64805e4c5ab4c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">说的没错，所以我们在阐述这些问题的时候，也会附上我们当前基于 REST 的解决方案。</span></span></p></div><div id="https://www.notion.so/4388002bb9d847b19f7401a6c54f8bcc" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/709d37009cf34ae68e5c175764cfe08a" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Overfetching：</strong></span></span></p></div><div id="https://www.notion.so/0a6c5ca98493402b85372602b910066e" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">假如我们定义了一个 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/comments</code></span><span class="SemanticString"> 的 API，输出评论列表。以 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.django-rest-framework.org/">django-rest-framework</a></span><span class="SemanticString"> 为例，我们都会定义一个 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">Serializer</code></span><span class="SemanticString"> 来声明它的输入和输出。</span></span></p></div><pre id="https://www.notion.so/58999985852d4f2983e86d4aa6e8036a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> rest_framework <span class="token keyword">import</span> serializers

<span class="token keyword">class</span> <span class="token class-name">CommentSerializer</span><span class="token punctuation">(</span>serializers<span class="token punctuation">.</span>Serializer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    email <span class="token operator">=</span> serializers<span class="token punctuation">.</span>EmailField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    content <span class="token operator">=</span> serializers<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">)</span>
    logo <span class="token operator">=</span> serializer<span class="token punctuation">.</span>ImageField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>省略数不清的字段<span class="token punctuation">)</span>
    created <span class="token operator">=</span> serializers<span class="token punctuation">.</span>DateTimeField<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ip_from <span class="token operator">=</span> serializers<span class="token punctuation">.</span>IPAddressField<span class="token punctuation">(</span><span class="token punctuation">)</span></span></span></span></code></pre><div id="https://www.notion.so/7ab7653f6ba143ea8c3f52a9bddabe5d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">看起来符合常理，它可以轻松满足大多数评论列表的需求。但是也许某一天，我们需要一个评论的精简列表的 API，当前返回内容中，除了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">content</code></span><span class="SemanticString"> 以外的其他字段都变成多余了，那么后端开发需要重新定一个 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">MinimalCommentSerializer</code></span><span class="SemanticString"> 来满足新的需求。</span></span></p></div><div id="https://www.notion.so/47f8286879ee4b31badc0092bff0e067" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 REST 基础中，我们增加了 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">fields</code></span><span class="SemanticString"> 参数，并在 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">DRF Serializer</code></span><span class="SemanticString"> 里做了</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/TencentBlueKing/bk-user/blob/8c633e0a3821beb839ed120c4514c5733e675862/src/api/bkuser_core/common/viewset.py#L71">特殊处理（你可以点击查看源码）</a></span><span class="SemanticString">，实现的具体效果：</span></span></p></div><pre id="https://www.notion.so/b8851ef31aad4eef97c276b5095c7623" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span># 查询 comment，并限制结果返回字段
/api/comments?fields=email<span class="token punctuation">,</span>content

# 返回
<span class="token punctuation">{</span>
  <span class="token property">"results"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"foo@bar.com"</span><span class="token punctuation">,</span>
      <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"I love this blog, simple and good looking."</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/6b1fed2e69744050a15bad820fc6a639" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">而如果我们使用 GraphQL，写法上会更自然：</span></span></p></div><pre id="https://www.notion.so/a97feb1db9a34041bce59f02270f8d33" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token object">comment</span> <span class="token punctuation">{</span>
    <span class="token property">email</span>
    <span class="token property">content</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/d356e70350b6454ba439aeb17c2b0465" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">Underfetching</strong></span></span></p></div><div id="https://www.notion.so/9c90cc0d8df5410ead37b027f26f4a2c" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">相较于 Overfetching 是获取了过多数据，Underfetching 则是在请求获取的数据不足够满足需求。</span></span></p></div><div id="https://www.notion.so/2063f8ba783a4c52ba160ad19c127500" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7396e0b5-7539-4174-992e-c35a8076984e%2FUntitled.png?width=720&amp;table=block&amp;id=2063f8ba-783a-4c52-ba16-0ad19c127500"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2F7396e0b5-7539-4174-992e-c35a8076984e%2FUntitled.png?width=720&amp;table=block&amp;id=2063f8ba-783a-4c52-ba16-0ad19c127500" style="width:720px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString">传统的 REST 协议</span></span></figcaption></figure></div><div id="https://www.notion.so/f0bf48cd67c64fcda47972a423bd3f6b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">假如我们需要获取所有用户维度的评论，我们需要先获取通过 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/users</code></span><span class="SemanticString"> 所有用户 id，再使用 id 列表遍历查询 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/users/&lt;id&gt;/comments</code></span><span class="SemanticString"> 来获取相关的列表。</span></span></p></div><div id="https://www.notion.so/63ea8baedfc8427181e13ae61def761b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">在 REST 中，为了这个需求我们可能会额外为 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">/users</code></span><span class="SemanticString"> 增加一个参数 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">with_comments</code></span><span class="SemanticString"> </span></span></p></div><pre id="https://www.notion.so/016d769e5a6a43e394588c4b93b7393a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span># 查询 users，并限制结果返回字段
/api/users?with_comments=<span class="token number">1</span>

# 返回
<span class="token punctuation">{</span>
  <span class="token property">"results"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">"username"</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
      <span class="token property">"telephone"</span><span class="token operator">:</span> <span class="token string">"12345"</span><span class="token punctuation">,</span>
      <span class="token property">"comments"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"email"</span><span class="token operator">:</span> <span class="token string">"foo@bar.com"</span><span class="token punctuation">,</span>
          <span class="token property">"content"</span><span class="token operator">:</span> <span class="token string">"I love this blog, simple and good looking."</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/687fa7fdb1a44fc6ace5dd289f93e926" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/74aed63e32344a8aad59b5c4d9da5795" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">相较于自定义的 REST 协议，使用 GraphQL 可以更简单：</span></span></p></div><div id="https://www.notion.so/308a0c7b8d5e440d81cd7b7e3cfac9ca" class="Image Image--Normal"><figure><a href="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc730795a-8b87-497e-a6c8-38c4c29f310a%2FUntitled.png?width=624&amp;table=block&amp;id=308a0c7b-8d5e-440d-81cd-7b7e3cfac9ca"><img src="https://www.notion.so/signed/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc730795a-8b87-497e-a6c8-38c4c29f310a%2FUntitled.png?width=624&amp;table=block&amp;id=308a0c7b-8d5e-440d-81cd-7b7e3cfac9ca" style="width:624px"/></a><figcaption><span class="SemanticStringArray"><span class="SemanticString">使用 GraphQL，只需要一次请求</span></span></figcaption></figure></div><div id="https://www.notion.so/202d6df219504c959ba0e416d95c474b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic">(该例子中的图片参考自 </em></span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.howtographql.com/basics/1-graphql-is-the-better-rest/">https://www.howtographql.com/basics/1-graphql-is-the-better-rest/</a></em></span><span class="SemanticString"><em class="SemanticString__Fragment SemanticString__Fragment--Italic"> 懒得自己画了)</em></span></span></p></div><div id="https://www.notion.so/c9b7a594e48249dda2de76643e5dd90a" class="Divider"></div><div id="https://www.notion.so/091f1d6aa4f6439aa1005bf7d82ac67d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/622a97a6787a450e9a28044f24c7e5f2" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">相信通过上面的例子，我们可以清晰地看出，相较于 GraphQL ，基于 REST 扩展协议存在这些问题：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/a6fe2dc7b9c546d483ab3deed858bdb5" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">不够通用，用户有额外的学习成本，增加了额外的文档负担。</span></span></li><li id="https://www.notion.so/5c543045c1d2410f83b0b2a4e767c6e0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">基于 REST ，单个请求只能针对单个对象进行描述。需要等待需求沉淀，由后端主动封装，迭代节奏会更慢。</span></span></li></ul><h2 id="https://www.notion.so/1e65a49c19ac4da1ae8366ba9c461af2" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/1e65a49c19ac4da1ae8366ba9c461af2"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">什么是 GraphQL 客户端?</span></span></h2><div id="https://www.notion.so/930552c7cedf41a6bcaf993d16141b6f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">我们主要聚焦于 GraphQL 服务端提供，但是也需要先看一下所谓的客户端究竟做了什么。</span></span></p></div><div id="https://www.notion.so/a581bca6df534f1aa054e28fb8f29ae8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">简单来说，要想在原生 Javascript 中直接使用 GraphQL 并不是一件特别容易的事，需要一些库来协助拉取和管理 GraphQL 数据。</span></span></p></div><div id="https://www.notion.so/de808a76a2df4bc78435e75b1de7cdb6" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">相较于原生的 GraphQL ，客户端主要解决了几件事情：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/b64a0bc46ed041aeb98fc3a7230b58f0" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">客户端数据拉取缓存问题（包括缓存一致性、更新缓存等）</span></span></li><li id="https://www.notion.so/e17c5feac98f407194f0fc0185fac5ad" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">数据分页、声明式数据获取</span></span></li><li id="https://www.notion.so/02204d46452e45dc9f3a4e43540823dd" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">...</span></span></li></ul><div id="https://www.notion.so/a18fdb3409d8455cba4571ee3aa3e7eb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">主流的客户端框架主要有两种—— </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://relay.dev/">Relay</a></span><span class="SemanticString"> 和 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://www.apollographql.com/">Apollo</a></span><span class="SemanticString"> ，我们仅从有限的角度来看下二者的异同：</span></span></p></div><div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div><div id="https://www.notion.so/8185fd4c5d3d486aa39032b1a013ac59" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">简而言之，Realy 更复杂，更能够应对大型应用，Apollo 更轻量，不过需要更多的手工劳动。</span></span></p></div><h2 id="https://www.notion.so/f0ff16d684154ed4a4067456907856da" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/f0ff16d684154ed4a4067456907856da"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">服务端落地：GraphQL → Django</span></span></h2><div id="https://www.notion.so/a3cc4811c4e44bffb88db4ecae085fef" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">想要将 GraphQL 引入现有的项目，我们需要安装两个基础的依赖：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/444dd7a467c24c2882d4216fb3db9776" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/graphql-python/graphene-django">graphene-django</a></span><span class="SemanticString"> </span></span></li><li id="https://www.notion.so/c2492425caf64b96ac9f8c6a23b55c37" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/carltongibson/django-filter">django-filter</a></span></span></li></ul><div id="https://www.notion.so/2902703100fe4cbc8cd755647b2bf2ec" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">二者分别负责两部分的工作：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/e73cf2474879425f93647308cb0ad727" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Django Model ⇒  Schema</span></span></li><li id="https://www.notion.so/f1da625f4b844856bb2cde5798c8be4c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Query  ⇒  Filter Django Model </span></span></li></ul><h3 id="https://www.notion.so/379decb772d541279b4a379192597aa5" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/379decb772d541279b4a379192597aa5"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">支持 Relay</span></span></h3><div id="https://www.notion.so/e9653bd73c914267ad6a4320be92c121" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">graphene-django 本身 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://docs.graphene-python.org/projects/django/en/latest/tutorial-relay/">默认支持 Relay</a></span><span class="SemanticString">，所以你可以很容易地开启</span></span></p></div><pre id="https://www.notion.so/255db46055e94d29b40ace040ed36ced" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> graphene <span class="token keyword">import</span> relay
<span class="token keyword">from</span> graphene_django <span class="token keyword">import</span> DjangoObjectType
<span class="token keyword">from</span> ingredients<span class="token punctuation">.</span>models <span class="token keyword">import</span> Category

<span class="token comment"># Graphene will automatically map the Category model's fields onto the CategoryNode.</span>
<span class="token comment"># This is configured in the CategoryNode's Meta class (as you can see below)</span>
<span class="token keyword">class</span> <span class="token class-name">CategoryNode</span><span class="token punctuation">(</span>DjangoObjectType<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Category
        filter_fields <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'ingredients'</span><span class="token punctuation">]</span>
        interfaces <span class="token operator">=</span> <span class="token punctuation">(</span>relay<span class="token punctuation">.</span>Node<span class="token punctuation">,</span> <span class="token punctuation">)</span></span></span></span></code></pre><div id="https://www.notion.so/56261a0c20cc48b39961c2a69ab063c9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">不过很多时候考虑到 Relay 的复杂度，有时都不适合引入，更何况 Relay 需要特殊的 Schema 支持：</span></span></p></div><div id="https://www.notion.so/7725b1f98bb34805a637cb7a87ffa86a" class="ColumnList"><div id="https://www.notion.so/b3c7351d2ad94e8ba4d33c37aefc3f98" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><pre id="https://www.notion.so/eabf9ae68c954d1cb9ce5dd0ff1b740e" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token object">allIngredients</span> <span class="token punctuation">{</span>
    <span class="token object">edges</span> <span class="token punctuation">{</span>
      <span class="token object">node</span> <span class="token punctuation">{</span>
        <span class="token property">id</span><span class="token punctuation">,</span>
        <span class="token property">name</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></span></span></span></code></pre></div><div id="https://www.notion.so/26658579387c4fdbab97d1738254e3ad" class="Column" style="width:calc((100% - var(--column-spacing) * 1) * 0.5)"><pre id="https://www.notion.so/51c390d588fc4313a3a7b72c0fb1929f" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token object">allIngredients</span> <span class="token punctuation">{</span>
    <span class="token property">id</span>
    <span class="token property">name</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>



</span></span></span></code></pre></div></div><div id="https://www.notion.so/4a89f9f7addf43a5bde5841b0567f0cb" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这时候 graphene-django 就存在一个问题，当不使用 Relay 时，存在一些功能缺失：</span></span></p></div><ul class="BulletedListWrapper"><li id="https://www.notion.so/e373c8e6567a43f79c3cfd73a75bd823" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Fragment \ Directives </span></span></li><li id="https://www.notion.so/f551dd3d3d5b4752a9ee52b1a375f0b1" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">分页、过滤</span></span></li><li id="https://www.notion.so/ca1a4b6f03014cc08e10872eb4731467" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">通过 DRF Serializer 定义 Mutations</span></span></li></ul><div id="https://www.notion.so/2bf5945390cc4e66964233d40e5a458f" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">所以我们需要引入额外的库来解决。</span></span></p></div><h3 id="https://www.notion.so/62d2c6f19a52464794172a0da302a140" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/62d2c6f19a52464794172a0da302a140"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">引入 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/eamigo86/graphene-django-extras">graphene-django-extras</a></span></span></h3><pre id="https://www.notion.so/ccd7d417496a4bd0b7e5cc2d5bdbf092" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> graphene <span class="token keyword">import</span> ObjectType
<span class="token keyword">from</span> graphene_django_extras <span class="token keyword">import</span> DjangoListObjectField<span class="token punctuation">,</span> DjangoListObjectType
<span class="token keyword">from</span> graphene_django_extras<span class="token punctuation">.</span>paginations <span class="token keyword">import</span> LimitOffsetGraphqlPagination

<span class="token keyword">class</span> <span class="token class-name">CommentListType</span><span class="token punctuation">(</span>DjangoListObjectType<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Comment
        fields <span class="token operator">=</span> <span class="token string">"__all__"</span>
        pagination <span class="token operator">=</span> LimitOffsetGraphqlPagination<span class="token punctuation">(</span>default_limit<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">,</span> ordering<span class="token operator">=</span><span class="token string">"-id"</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">Query</span><span class="token punctuation">(</span>ObjectType<span class="token punctuation">)</span><span class="token punctuation">:</span>
    comments <span class="token operator">=</span> DjangoListObjectField<span class="token punctuation">(</span>CommentListType<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">"Query all comments"</span><span class="token punctuation">)</span></span></span></span></code></pre><div id="https://www.notion.so/f5432324e1b8422eaf81f565231b1e60" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">支持复杂过滤查询</strong></span></span></p></div><div id="https://www.notion.so/0d6469e639b3446cbce967509997c9d8" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">可以在列表对象中增加 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">filter_fields</code></span><span class="SemanticString"> ，针对不同的字段支持不同的 Django 复杂查询方法。</span></span></p></div><pre id="https://www.notion.so/8245a3dbb9f44d91a9beae87e933d077" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">class</span> <span class="token class-name">CommentListType</span><span class="token punctuation">(</span>DjangoListObjectType<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> Comment
        filter_fields <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"exact"</span><span class="token punctuation">,</span> <span class="token string">"in"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string">"content"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"exact"</span><span class="token punctuation">,</span> <span class="token string">"icontains"</span><span class="token punctuation">,</span> <span class="token string">"istartswith"</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        pagination <span class="token operator">=</span> LimitOffsetGraphqlPagination<span class="token punctuation">(</span>default_limit<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">,</span> ordering<span class="token operator">=</span><span class="token string">"-username"</span><span class="token punctuation">)</span></span></span></span></code></pre><div id="https://www.notion.so/17fdab95d13142089865d8aa26c0fecf" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">这样就可以将一些 Django 的查询能力释放到前端</span></span></p></div><pre id="https://www.notion.so/bf2b23e89d2944439dd5dd7e92e54b69" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token property-query">comments</span><span class="token punctuation">(</span><span class="token attr-name">id__In</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token attr-name">content_Icontains</span><span class="token punctuation">:</span> <span class="token string">"Amazing"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token property">totalCount</span>
    <span class="token property-query">results</span><span class="token punctuation">(</span><span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token attr-name">offset</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token property">id</span>
      <span class="token property">email</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span></span></span></span></code></pre><div id="https://www.notion.so/db5a44abedda4583923c4708aa700538" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString"><strong class="SemanticString__Fragment SemanticString__Fragment--Bold">自定义查询字段</strong></span></span></p></div><div id="https://www.notion.so/1692de9ca8c34bec86006316b239f489" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">Django 默认的查询能力，对于一些特殊字段并不能完全覆盖需求，这时我们就需要针对这些内容手写一些处理逻辑。</span></span></p></div><pre id="https://www.notion.so/94b1e76dd9c24d4d894fa6c7407bd017" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">class</span> <span class="token class-name">Query</span><span class="token punctuation">(</span>ObjectType<span class="token punctuation">)</span><span class="token punctuation">:</span>
    user <span class="token operator">=</span> Field<span class="token punctuation">(</span>UserType<span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">"Retrieve certain user"</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token operator">=</span>Int<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> username<span class="token operator">=</span>String<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

		<span class="token keyword">def</span> <span class="token function">resolve_user</span><span class="token punctuation">(</span>
        self<span class="token punctuation">,</span> context<span class="token punctuation">:</span> <span class="token string">"GraphQLResolveInfo"</span><span class="token punctuation">,</span> <span class="token builtin">id</span><span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span> username<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span>
    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> User<span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">id</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>pk<span class="token operator">=</span><span class="token builtin">id</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> username <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token string">"username or pk at least one is required"</span><span class="token punctuation">)</span>

        <span class="token comment"># do some custom logic</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

        <span class="token keyword">return</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span>username<span class="token operator">=</span>username<span class="token punctuation">)</span></span></span></span></code></pre><div id="https://www.notion.so/aaaa1a613fc949f592d395fc732a1301" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">需要注意的是，当我们使用 </span><span class="SemanticString"><code class="SemanticString__Fragment SemanticString__Fragment--Code">resolve_</code></span><span class="SemanticString"> 函数去处理查询时，GraphQL 和 REST 本质上只是查询 DSL 有所区别，都会遇到类似像 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping">N+1</a></span><span class="SemanticString"> 这样的慢查询问题，所以需要谨慎地将前端的查询转换成可靠的 Django ORM 查询。</span></span></p></div><h3 id="https://www.notion.so/cd5ccf48f0af4fbba1811566c44a7915" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--3"><a class="Anchor" href="#https://www.notion.so/cd5ccf48f0af4fbba1811566c44a7915"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">鉴权</span></span></h3><div id="https://www.notion.so/bc66b9dc0cab47629780f9f0428403d9" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">由于 API 请求并不再经过传统封装的 ViewSet，原有的鉴权组件不再能使用，你需要引入新的 </span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/redzej/graphene-permissions">graphene-permissions</a></span><span class="SemanticString"> 来解决针对用户的权限控制。</span></span></p></div><div id="https://www.notion.so/eca91cb3cb7c4c07871b02f13212394d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">本文成文时，graphene-permissions 对于最新的 Graphene 3.x 有一些</span><span class="SemanticString"><a class="SemanticString__Fragment SemanticString__Fragment--Link" href="https://github.com/redzej/graphene-permissions/pull/36">小的兼容性问题</a></span><span class="SemanticString">，由于该库代码量非常小，可以考虑复制到自己的项目手动维护。</span></span></p></div><pre id="https://www.notion.so/268e9c66b4d04cbca51d5ee2b454db9a" class="Code"><code><span class="SemanticStringArray"><span class="SemanticString"><span><span class="token keyword">from</span> <span class="token punctuation">.</span>mixins <span class="token keyword">import</span> AuthNode
<span class="token keyword">from</span> <span class="token punctuation">.</span>permissions <span class="token keyword">import</span> AllowSuperuser

<span class="token keyword">class</span> <span class="token class-name">UserNode</span><span class="token punctuation">(</span>AuthNode<span class="token punctuation">,</span> DjangoObjectType<span class="token punctuation">)</span><span class="token punctuation">:</span>
    permission_classes <span class="token operator">=</span> <span class="token punctuation">(</span>AllowAuthenticated<span class="token punctuation">,</span><span class="token punctuation">)</span>

    <span class="token keyword">class</span> <span class="token class-name">Meta</span><span class="token punctuation">:</span>
        model <span class="token operator">=</span> User
        filter_fields <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'username'</span><span class="token punctuation">,</span><span class="token punctuation">)</span>
        interfaces <span class="token operator">=</span> <span class="token punctuation">(</span>relay<span class="token punctuation">.</span>Node<span class="token punctuation">,</span><span class="token punctuation">)</span></span></span></span></code></pre><div id="https://www.notion.so/011b7c6862bd46919e03afbe0919742b" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div><div id="https://www.notion.so/b9e6bc5f1f704effb614596518350715" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"><span class="SemanticString">尴尬的是，如果你并不想用 Relay，我们需要针对 graphene-django-extras 做一些自己的定制，而原有的封装没有很好地暴露足够的接口，经过一番探索并无头绪，最终作罢🥴。</span></span></p></div><h2 id="https://www.notion.so/0151349335634c8aa268f2794e844c4f" class="ColorfulBlock ColorfulBlock--ColorDefault Heading Heading--2"><a class="Anchor" href="#https://www.notion.so/0151349335634c8aa268f2794e844c4f"><svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><span class="SemanticStringArray"><span class="SemanticString">总结</span></span></h2><ul class="BulletedListWrapper"><li id="https://www.notion.so/0c494c551f5a44efa61e68afef4a075c" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">GraphQL 在前端需求迭代频繁的场景下，比 REST 更符合现代开发节奏</span></span></li><li id="https://www.notion.so/3dbcd476f15d46679a8690b20d41531f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">GraphQL 的语言设计比自定义扩展的 REST 更自然，更具备通用性</span></span></li><li id="https://www.notion.so/6f6e10842a9a458e8dfcdfbae507f87f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">GraphQL 会将比较多的工作放到客户端，适合成熟的客户端开发团队，反之 REST 是更好的选择</span></span></li><li id="https://www.notion.so/75f34126328044a885b0fa877f44408f" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">Django 相关的生态建设并不完善，没有一个足够强大、开箱即用的整合方案</span></span></li><li id="https://www.notion.so/9fc5020fd26b455684bbbf16b67be1d7" class="BulletedList"><span class="SemanticStringArray"><span class="SemanticString">由于查询并不是基于 Uri 维度，会给周边配套的生态—— 监控、日志等 ——带来一些新的挑战，如何基于</span></span></li></ul><div id="https://www.notion.so/c696da004a8241faa19eddbb9d0fb27d" class="ColorfulBlock ColorfulBlock--ColorDefault Text"><p class="Text__Content"><span class="SemanticStringArray"></span></p></div></article>

  <!-- utterances - Github issue comment -->
  <div>
    <script src="https://utteranc.es/client.js"
      repo="IMBlues/IMBlues.github.io"
      issue-term="pathname"
      label="blog-comment"
      theme="github-light"
      crossorigin="anonymous"
      async>
    </script>
  </div>
  <!-- utterances - Github issue comment -->

  <footer class="Footer">
  <div>&copy; 布鲁斯🐟的奇思乱想 2019-2021</div>
  <div>&centerdot;</div>
  <div>Powered by <a href="https://github.com/dragonman225/notablog" target="_blank"
      rel="noopener noreferrer">Notablog</a>.
  </div>
</footer>
</body>

</html>
